#!/bin/dash

# TODO
# contain alpha-numeric characters plus '.', '-' and '_' characters.
        
if [ $# -eq 0 ]; then
    echo "usage: legit-add <filenames>"; 
    exit 0; 
fi

if ! [ -d ".legit" ]; then
    echo "legit-add: error: no .legit directory containing legit repository exists";    # not $0
    exit 0;
fi

index='.legit/index';
for i in $@
do
    if echo "$i" | egrep -qv "^[a-zA-Z0-9]"; then
        continue;
    fi
    
    if [ -f "$i" ] && [ -s "$i" ]; then
        # cat $i;
        # cpy into index
        cp "$i" "$index/$i"
    else
        echo "legit-add: error: can not open '$i'";
    fi
done

